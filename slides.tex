\documentclass[10pt]{beamer}

\usefonttheme{professionalfonts}% use own font handling
\usetheme{m}

\usepackage{ulem}
\usepackage{turnstile}
\usepackage{proof}
\usepackage{booktabs}
\usepackage[scale=2]{ccicons}
\usepackage{amsmath, stmaryrd, scalerel}
\usepackage{fontspec}
\usepackage{geometry}
\usepackage{proof}
\usepackage{supertabular}
\usepackage{unicode-math}
\usepackage{xltxtra}
\usepackage{xunicode}
\setmathfont{Asana Math}

% \theoremstyle{mystyle}
\newtheorem*{remark}{Remark}

% colors
\definecolor{MidnightBlue}{rgb}{0.1, 0.1, 0.44}
\definecolor{Maroon}{rgb}{0.5, 0.0, 0.0}
\def\InputModeColorName{MidnightBlue}
\def\OutputModeColorName{Maroon}

% modes
\newcommand\IMode[1]{{\color{\InputModeColorName}{#1}}}
\newcommand\OMode[1]{{\color{\OutputModeColorName}{#1}}}

% judgments
\newcommand\GenJ[2]{%
  \vert_{\IMode{#1}}\; #2
}
\newcommand\HypJ[2]{%
  #1\ \left(#2\right)
}

\newcommand\SemBrackets[1]{\left\llbracket #1\right\rrbracket}
\newcommand\Meaning[1]{\SemBrackets{\textit{#1}}}
\newcommand\VertSem[2]{%
  \begin{array}{c}%
    \Meaning{\IMode{#1}}\\%
    \bigtriangledown\\%
    \OMode{#2}%
  \end{array}%
}

\newcommand\Force[2]{\IMode{#1}\Vdash #2}
\newcommand\ForceAlign[2]{\IMode{#1}&\Vdash#2}

\newcommand\Reflects[2]{
 #1\ \ \mathbin\fullouterjoin\ \ #2
}

\newcommand\ReflectsAlign[2]{
 #1\ &\mathbin\fullouterjoin\ #2
}

\newcommand\Eval[2]{\IMode{#1}\Downarrow\OMode{#2}}
\newcommand\EvalND[3]{\IMode{#2}\Downarrow_{\IMode{#1}}\OMode{#3}}
\newcommand\VertEval[2]{
  \begin{array}{c}%
    \IMode{#1}\\%
    \Downarrow\\%
    \OMode{#2}%
  \end{array}%
}
\newcommand\Seq[2]{\IMode{#1}\vdash\IMode{#2}}
\newcommand\Member[2]{\IMode{#1}\in\IMode{#2}}
\newcommand\EqMember[3]{\IMode{#1}=\IMode{#2}\in\IMode{#3}}
\newcommand\IsType[1]{\IMode{#1}\ \text{\rmfamily\itshape type}}
\newcommand\EqType[2]{\IMode{#1}=\IMode{#2}\ \text{\rmfamily\itshape type}}
\newcommand\IsTrue[1]{\IMode{#1}\ \text{\rmfamily\itshape true}}
\newcommand\IsVer[1]{\IMode{#1}\ \text{\rmfamily\itshape verif}}
\newcommand\OpSig[2]{\IMode{#1} : \OMode{#2}}
\newcommand\NotationDef[2]{\IMode{#1} \eqdef \OMode{#2}}
\newcommand\Match[2]{\IMode{#1}=\OMode{#2}}
\newcommand\MatchAlign[2]{\IMode{#1}&=\OMode{#2}}
\newcommand\Size[1]{\left\vert#1\right\vert}
\newcommand\IsLessThan[2]{\IMode{#1}<\IMode{#2}}
\newcommand\Bars[2]{\IMode{#1}\;\mathbf{bars}\;\IMode{#2}}

\newcommand\VAL[2]{\mathcal{V}\!\SemBrackets{\IMode{#1}}_{\IMode{#2}}}

\newcommand\Domain[1]{\mathcal{D}_{\IMode{#1}}}

\newcommand\Block[1]{\fbox{\parbox{\textwidth}{#1}}}

\newcommand\Worlds{\mathbb{W}}
\newcommand\FINSET{\mathbf{FinSet}}
\newcommand\Opposite[1]{#1^{\mathrm{op}}}

% expressions
\newcommand\TyEnt{\mathbb{E}}
\newcommand\TyFun[3]{(\Pi #2\in #1)\, #3}
\newcommand\TyImp[2]{#1\supset #2}
\newcommand\TyProd[3]{(\Sigma #2\in #1)\, #3}
\newcommand\TySet[3]{\{#2: #1\mid #3\}}
\newcommand\TySetSimple[2]{\{#1\mid #2\}}
\newcommand\Proj[1]{\pi_{#1}}
\newcommand\OpRequire{\mathbf{require}}
\newcommand\Require[3]{\OpRequire\ #2:#1\ \mathbf{in}\ #3}
\newcommand\Head[1]{\mathsf{hd}(#1)}
\newcommand\Tail[1]{\mathsf{tl}(#1)}

\newcommand\BKS[1]{\varkappa_{#1}}
\newcommand\Nil{\langle\rangle}
\newcommand\Spw{\mathfrak{S}}
\newcommand\Lawful[1]{\Spw(\IMode{#1})}

\title{oracles and choice sequences for type-theoretic pragmatics}
\date{October 8, 2015}
\institute{joint work with Darryl McAdams}
\author{Jon Sterling}

\begin{document}

\maketitle

\section{Introduction}

\begin{frame}{natural language semantics and anaphora}
  \pause
  \[
    \VertSem{A woman walked in.}{
      \pause
      \TyProd{Woman}{p}{\pause WalkedIn(p)}
    }
  \]
\end{frame}

\begin{frame}{natural language semantics and anaphora}
  \[
    \VertSem{She sat down}{
      \pause
      SatDown(???)
    }
  \]
\end{frame}

\begin{frame}{natural language semantics and anaphora}
  \[
    \VertSem{A woman walked in. She sat down}{
      \pause
      \TyProd{\TyProd{Woman}{p}{WalkedIn(p)}}{x}{
        \pause
        SatDown(???)
      }
    }
  \]
\end{frame}

\begin{frame}{natural language semantics and anaphora}
  \[
    \VertSem{A woman walked in. She sat down}{
      \TyProd{\TyProd{Woman}{p}{WalkedIn(p)}}{x}{
        SatDown(\Proj{1}(x))
      }
    }
  \]
\end{frame}

\begin{frame}{the ``donkey sentence''}
  \[
    \VertSem{Every farmer who owns a donkey beats it.}{
      \TyFun{
        \TyProd{Farmer}{x}{
          \TyProd{Donkey}{y}{
            Owns(x;y)
          }
        }
      }{p}{
        \pause
        Beats(\only<2>{???;???}\only<3>{\Proj{1}(p);\Proj{1}(\Proj{2}(p))})
      }
    }
  \]
\end{frame}

\begin{frame}{two things to deal with}
  \pause
  \begin{itemize}[<+->]
    \item \alert<4-5>{terms for presuppositions}\only<5>{ (this talk)}
    \item resolution of presuppositions
  \end{itemize}
\end{frame}

\section{the $\OpRequire$ oracle: statics}

\begin{frame}{$\OpRequire$ --- formal rules}
  \pause

  \begin{gather*}
    \OpSig{\OpRequire}{(0;1)}\tag{operator}\\
    \NotationDef{\Require{A}{x}{N}}{\OpRequire(A; x.N)}\tag{notation}
  \end{gather*}
  \pause
  \[
    \infer{
      \Seq{\Gamma}{\Member{\Require{A}{x}{N}}{B}}
    }{
      \Seq{\Gamma}{\IsType{A}} &
      \Seq{\Gamma,x:A}{\Member{N}{B}}
    }\tag{\textit{require}}
  \]
\end{frame}

\begin{frame}{$\OpRequire$ --- examples}
  \[
    \VertSem{A woman walked in. She sat down}{
      \TyProd{\TyProd{Woman}{p}{WalkedIn(p)}}{x}{
        \only<1>{SatDown(???)}%
        \only<2>{\Require{Woman}{y}{SatDown(y)}}%
      }
    }
  \]
\end{frame}

\begin{frame}{revising montague's program}
  \only<1>{
    The meaning of a sentence is a logical proposition.
  }
  \only<2->{
    \sout{The meaning of a sentence is a logical proposition.}
  }

  \only<3->{
    \alert<4->{The meaning of a sentence is a type-theoretic expression which may
    \emph{evaluate} to a canonical proposition.}
  }

  \only<5->{
    \textbf{What we want:}
    \begin{gather*}
      \IMode{\TyProd{\TyProd{Woman}{p}{WalkedIn(p)}}{x}{\Require{Woman}{y}{SatDown(y)}}}\\
      \sim\\
      \IMode{\TyProd{\TyProd{Woman}{p}{WalkedIn(p)}}{x}{\Proj{1}(x)}}
    \end{gather*}
  }

  \only<6->{
    \centering
    \framebox{
      where
      $\IMode{M\sim N} \eqdef
       \OMode{(M\preceq N)\land(N\preceq M)}$
    }
  }
\end{frame}

\begin{frame}{Every grammatical sentence has a meaning}
  \pause
  ...but only some of them denote propositions (types)!
\end{frame}

\begin{frame}{$\OpRequire$---na\"ive dynamics}

  \[
    \infer{
      \Eval{\Require{A}{x}{N}}{N'}
    }{
      \Member{M}{A} &
      \Eval{\left[M/x\right]N}{N'}
    }\tag{??}
  \]
  \pause

  Can the above be made precise? \pause \alert{There are two problems:}\pause
  \begin{enumerate}[<+->]
    \item impredicativity
    \item non-determinism
  \end{enumerate}
\end{frame}

\plain{(hold that thought)}

\begin{frame}{a positive example}
  \pause
  \[
    \VertSem{
      The President ran a marathon
    }{
      \pause
      \Require{President}{x}{
        \TyProd{Marathon}{y}{
          Ran(x;y)
        }
      }
    }
  \]
\end{frame}

\begin{frame}{a positive example}
  \pause
  \[
    \VertEval{
      \Require{President}{x}{
        \TyProd{Marathon}{y}{
          Ran(x;y)
        }
      }\pause
    }{
      \TyProd{Marathon}{y}{
        Ran(Obama;y)
      }
    }
  \]
\end{frame}


\begin{frame}{a negative example}
  \pause
  \[
    \VertSem{
      The unicorn ran a marathon
    }{
      \pause
      \Require{Unicorn}{x}{
        \TyProd{Marathon}{y}{
          Ran(x;y)
        }
      }
    }
  \]

  \pause
  \begin{center}
    (not a proposition)
  \end{center}
\end{frame}

\plain{Is $\OpRequire$ computationally effective?}

\begin{frame}
  \emph{Yes, but we need two things:}\pause
  \begin{enumerate}[<+->]
    \item judgments shall be local / sensitive to knowledge \only<4->{\alert{(via forcing)}}
    \item non-determinism must be eliminated \only<6->{\alert{(via choice sequences)}}
  \end{enumerate}

  \begin{center}
    \only<5-6>{
      \framebox{
        $\Force{w}{\mathcal{J}}$
      }
    }
    \only<7->{
      \framebox{
        $\Force{w}{\mathcal{J}_\IMode{\alpha}}$
      }
    }
  \end{center}
\end{frame}

\section{the creating subject}

\begin{frame}{the theory of the creating subject}
  \pause
  All mathematics is a mental construction performed by an idealized subject, \alert<3->{subject to the following observations about knowledge}:
  \pause
  \pause
  \begin{enumerate}[<+->]
    \item experiences are never forgotten \alert{(monotonicity, functoriality)}
    \item at a point in time, the subject knows whether or not it has experienced a judgment \alert{(decidability)}

      \begin{corollary}
        The meaning of a judgment $\mathcal{J}$ must be explained in terms of its forcing condition, \framebox{$\Force{w}{\mathcal{J}}$}, for any stage/world $\IMode{w}$.
      \end{corollary}
  \end{enumerate}
\end{frame}

\begin{frame}{remark on decidability}
  \begin{center}...\end{center}
  \Block{
    \begin{enumerate}
      \item[2.] at a point in time, the subject knows whether or not it has experienced a judgment \alert{(decidability)}
    \end{enumerate}
  }\pause

  \begin{remark}
    Contra Dummett, I \emph{by no means} take the above as requiring that the following shall be true in a constructive metatheory, \alert{divorced from time}:
    \[
      \forall\IMode{w}.\forall\IMode{\mathcal{J}}.\ \SemBrackets{\Force{w}{\IMode{\mathcal{J}}}} \lor \lnot \SemBrackets{\Force{w}{\IMode{\mathcal{J}}}}\tag{Dummett's infelicity}
    \]
    The above is impossible in a Beth model.
  \end{remark}
\end{frame}

\begin{frame}{meaning theory without uniformity constraints}
  \pause
  \begin{align*}
    \textbf{\IMode{logical consequence}} &\Rightarrow \textbf{\OMode{semantic consequence}}\\
    \textit{\IMode{Brouwer?, Martin-L\"of, Sundholm}} &\Rightarrow \textit{\OMode{Brouwer?, Heyting, Allen, Zeilberger}}
  \end{align*}
  \pause
  \begin{align*}
    \textbf{\IMode{proof conditions}} &\Rightarrow \textbf{\OMode{assertion conditions}}\\
    \textit{\IMode{Martin-L\"of, Sundholm}} &\Rightarrow \textit{\OMode{Heyting, Van Atten}}
  \end{align*}
  \pause
  \begin{align*}
    \textbf{\IMode{global meaning explanation}} &\Rightarrow \textbf{\OMode{local meaning explanation}}\\
    \textit{\IMode{Husserl, Dummett, Martin-L\"of}} &\Rightarrow
      \begin{array}{l}
        \textit{\OMode{Brouwer?, Beth, Kripke,}}\\
        \textit{\OMode{Grothendieck, Lawvere, Joyal}}
      \end{array}
  \end{align*}
\end{frame}

\begin{frame}{beth-kripke semantics for assertions}
  assertion acts (judgments) are intensional (local)
  \pause

  \begin{align*}
    \only<9->{\IMode{w}}&\only<9->{\Vdash}\only<2->{\GenJ{x}{\mathcal{J}(x)}\tag{general judgment}}\\
    \only<9->{\IMode{w}}&\only<9->{\Vdash}\only<3->{\HypJ{\mathcal{J}_2}{\mathcal{J}_1}\tag{hypothetical judgment}}\\
    \only<9->{\IMode{w}}&\only<9->{\Vdash}\only<4->{\Eval{M}{N}\tag{evaluation}}\\
    \only<9->{\IMode{w}}&\only<9->{\Vdash}\only<5->{\IsType{A}\tag{typehood}}\\
    \only<9->{\IMode{w}}&\only<9->{\Vdash}\only<6->{\IsVer{A}\tag{verification}}\\
    \only<9->{\IMode{w}}&\only<9->{\Vdash}\only<7->{\IsTrue{A}\tag{truth}}\\
    \only<9->{\IMode{w}}&\only<9->{\Vdash}\only<8->{\EqMember{M}{N}{A}\tag{membership}}
  \end{align*}
\end{frame}

\begin{frame}{semantics of higher-order assertions}
  \only<1>{
    \begin{align*}
      \ForceAlign{w}{\GenJ{x}{\mathcal{J}(x)}}\tag{general judgment}\\
      \ForceAlign{w}{ \HypJ{\mathcal{J}_2}{\mathcal{J}_1}}\tag{hypothetical judgment}\\
    \end{align*}
  }
  \only<2->{
    \begin{alignat*}{3}
      \ForceAlign{w}{\GenJ{x}{\mathcal{J}(x)}}%
        &\Longleftrightarrow \ \ \ &
        \only<2>{\OMode{\cdots}}
        \only<3->{\forall \IMode{u}\succeq\IMode{w}.\forall\Member{x}{\Domain{u}}.\ \IMode{u}\Vdash\mathcal{J}(x)}\\
      \IMode{w}&\Vdash\HypJ{\mathcal{J}_2}{\mathcal{J}_1}\ \ \ %
         &\Longleftrightarrow \ \ \ &
         \only<2>{\OMode{\cdots}}
         \only<3->{\forall \IMode{u}\succeq\IMode{w}.\ \IMode{u}\Vdash\mathcal{J}_1\Rightarrow\IMode{u}\Vdash\mathcal{J}_2}
    \end{alignat*}
  }
  \only<4->{%
    where $\Domain{w}$ is the species of constructions that have been effected by stage $w$
  }
\end{frame}

\begin{frame}{the meaning of a proposition}
  The meaning of a proposition/type is an intensional (world-indexed)
  specification of verification acts, i.e.\ a local meaning explanation for
  \framebox{$\Force{w}{\IsVer{P}}$} (and its synthesis).
  \pause
  \bigskip

  For a type $A$, implicit in the explanation of $\Force{w}{\IsVer{A}}$ is a
  $\Worlds$-indexed family of PERs $\VAL{A}{w}\subseteq
  \Domain{w}\times\Domain{w}$ whose members \alert{reflect} the computational
  content (extension) of verification \emph{acts}.
\end{frame}

\begin{frame}{intuitionistic semantics of truth}
  Truth (\alert{justification}) consists in recognizing the effectiveness of a
  procedure for \alert{verification}.
  \pause\bigskip

  In the model, this corresponds to the inevitability of verification (i.e.\ a
  \emph{bar}, in which verification occurs at all nodes):
  \[
    \Force{w}{\IsTrue{A}}
      \Longleftrightarrow
       \exists\Bars{\mathfrak{B}}{w}.
        \forall\Member{u}{\mathfrak{B}}.\
         \Force{u}{\IsVer{A}}
          \tag{due to Dummett}
  \]
\end{frame}

\begin{frame}{membership as reflection on truth}
  The analytic judgments of type theory are reflections on mathematical activity.
  \pause

  \begin{enumerate}[<+->]
    \item \IMode{\bfseries Canonical membership} reflects \OMode{\bfseries verification}
    \item \IMode{\bfseries Membership} reflects \OMode{\bfseries justification}
    \item \IMode{\bfseries Computation} reflects \OMode{\bfseries the recognition of a \emph{bar}}
  \end{enumerate}

  \Block{
    \only<2>{
      \[
        \Reflects{
          \VAL{A}{w}(\IMode{M},\IMode{N})
        }{
          \Force{w}{\IsVer{A}}
        }
      \]
    }

    \only<3-4>{
      \[
        \Reflects{
          \Force{w}{\EqMember{M}{N}{A}}
        }{
          \Force{w}{\IsTrue{A}}
        }
      \]
    }

    \only<5->{
      \[
        \Reflects{
          \land\left\{
            \begin{array}{l}
              \Force{w}{\Eval{M}{M'}}\\
              \Force{w}{\Eval{N}{N'}}\\
              \Force{w}{\VAL{A}{w}(\IMode{M'},\IMode{N'})}
            \end{array}
          \right\}
        }{
          \exists\Bars{\mathfrak{B}}{w}.
           \forall\Member{u}{\mathfrak{B}}.\
            \Force{u}{\IsVer{A}}
        }
      \]
    }
  }
\end{frame}

\section{the $\OpRequire$ oracle: dynamics}

\begin{frame}{choice sequences and the creating subject}

  choice sequences (streams of objects) may be propounded over time based on
  the previous experience of the creating subject.
  \pause

  Example:
  \[
    \alpha(\IMode{i}) =
      \begin{cases}
        \OMode{0} & \Force{i}{\IsTrue{A}}\\
        \OMode{1} & \lnot(\Force{i}{\IsTrue{A}})
      \end{cases}\tag{KS}
  \]

\end{frame}

\begin{frame}{the justifications sheaf}

  Let $\mathcal{K}_A : \FINSET^{\Opposite{\Worlds}}$ be the sheaf of constructions of $\IsTrue{A}$ effected prior to $w$ for each canonical proposition $A$.
  \pause\bigskip

  We now can give a precise, but non-deterministic, dynamics to $\OpRequire$:
  \pause

  \begin{gather*}
    \infer{
      \Force{w}{
        \Eval{\Require{A}{x}{N}}{N'}
      }
    }{
      \Force{w}{\Eval{A}{A'}} &
      \Member{M}{\mathcal{K}_{A'}(w)} &
      \Force{w}{
        \Eval{\left[M/x\right]N}{N'}
      }
    }\tag{*}
  \end{gather*}


\end{frame}

\begin{frame}{eliminating non-determinism with a spread}

  We need a way to deterministically choose a representative of
  $\mathcal{K}_A(w)$. First, let $\BKS{A}$ be the choice sequence of lists given
  by enumerating $\mathcal{K}_A(w)$ at each world $w$, in order of construction.
  \pause\medskip

  \alert{Idea: reformulate Type Theory relative to a choice sequence of ``choosers''.}
\end{frame}

\begin{frame}{spreads: sets of choice sequences}

  A spread $\Spw$ is a restriction on choice sequences which is defined by a
  condition on their finite approximations (prefixes, \alert{neighborhoods}),
  subject to the following laws:\pause

  \begin{enumerate}[<+->]
    \item the empty neighborhood shall be admitted
      \[ \Lawful{\Nil} \]
    \item if a neighborhood is admitted, so shall all its subneighborhoods
      \[
        \GenJ{\vec{u},m}{\HypJ{\Lawful{\vec{u}}}{\Lawful{\vec{u}\frown m}}}
      \]
    \item inclusion of neighborhoods is closed under refinement/extension
      \[
         \GenJ{\vec{u}}{\HypJ{\Lawful{\vec{u}\frown\OMode{m}}}{\Lawful{\vec{u}}}}
      \]
  \end{enumerate}


\end{frame}

\begin{frame}{$\OpRequire$ --- dynamics}
  A spread for index-choosers:
  \begin{gather*}
    \infer{
      \Lawful{\Nil}
    }{
    }
    \qquad
    \infer{
      \Lawful{\vec{u}\frown\rho}
    }{
      \Lawful{\vec{u}} &
      \GenJ{n}{
        \HypJ{
          \IsLessThan{\mathbb{\rho}(n)}{n}
        }{
          \Member{n}{\mathbb{N}^+}
        }
      }
    }\tag{spread law}
  \end{gather*}
  \pause

  Deterministic dynamics for $\OpRequire$:
  \begin{gather*}
    \infer{
      \Force{w}{\EvalND{\alpha}{\Require{A}{x}{N}}{N'}}
    }{
      \Force{w}{\EvalND{\alpha}{A}{A'}} &
      \Match{\Size{\BKS{A'}(w)}}{\ell} &
      \Match{\Head{\alpha}(\ell)}{j} &
      \Force{w}{
        \EvalND{\Tail{\alpha}}{\left[\BKS{A'}(j)/x\right]N}{N'}
      }
    }\tag{for $\Member{\alpha}{\Spw}$}
  \end{gather*}

\end{frame}

\plain{Questions?}

%%\begin{frame}[allowframebreaks]
%%
%%  \frametitle{References}
%%
%%  \bibliography{refs}
%%  \bibliographystyle{abbrv}
%%
%%\end{frame}

\end{document}
